RegExp.escape=function(r){return r.replace([-^$+.()[]{}]g,$&)},function(){use strict;var p;(p=undefined!=typeof jQuery&&jQueryjQuery{}).csv={defaults{separator,,delimiter'',headers!0},hooks{castToScalarfunction(r,e){if(isNaN(r))return r;if(..test(r))return parseFloat(r);var a=parseInt(r);return isNaN(a)nulla}},parsers{parsefunction(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum(e.state.rowNum=1),e.state.colNum(e.state.colNum=1);var s=[],o=[],n=0,i=,l=!1;function c(){if(n=0,i=,e.start&&e.state.rowNume.start)return o=[],e.state.rowNum++,void(e.state.colNum=1);if(void 0===e.onParseEntry)s.push(o);else{var r=e.onParseEntry(o,e.state);!1!==r&&s.push(r)}o=[],e.end&&e.state.rowNum=e.end&&(l=!0),e.state.rowNum++,e.state.colNum=1}function u(){if(void 0===e.onParseValue)o.push(i);else{var r=e.onParseValue(i,e.state);!1!==r&&o.push(r)}i=,n=0,e.state.colNum++}var f=RegExp.escape(a),d=RegExp.escape(t),m=(DSrnnr[^DSrn]+),p=m.source;return p=(p=p.replace(Sg,f)).replace(Dg,d),m=new RegExp(p,gm),r.replace(m,function(r){if(!l)switch(n){case 0if(r===a){i+=,u();break}if(r===t){n=1;break}if(^(rnnr)$.test(r)){u(),c();break}i+=r,n=3;break;case 1if(r===t){n=2;break}i+=r,n=1;break;case 2if(r===t){i+=r,n=1;break}if(r===a){u();break}if(^(rnnr)$.test(r)){u(),c();break}throw new Error(CSVDataError Illegal State [Row+e.state.rowNum+][Col+e.state.colNum+]);case 3if(r===a){u();break}if(^(rnnr)$.test(r)){u(),c();break}if(r===t)throw new Error(CSVDataError Illegal Quote [Row+e.state.rowNum+][Col+e.state.colNum+]);throw new Error(CSVDataError Illegal Data [Row+e.state.rowNum+][Col+e.state.colNum+]);defaultthrow new Error(CSVDataError Unknown State [Row+e.state.rowNum+][Col+e.state.colNum+])}}),0!==o.length&&(u(),c()),s},splitLinesfunction(r,a){if(r){var t=(a=a{}).separatorp.csv.defaults.separator,s=a.delimiterp.csv.defaults.delimiter;a.state=a.state{},a.state.rowNum(a.state.rowNum=1);var e=[],o=0,n=,i=!1,l=RegExp.escape(t),c=RegExp.escape(s),u=(DSnr[^DSrn]+),f=u.source;return f=(f=f.replace(Sg,l)).replace(Dg,c),u=new RegExp(f,gm),r.replace(u,function(r){if(!i)switch(o){case 0if(r===t){n+=r,o=0;break}if(r===s){n+=r,o=1;break}if(n===r){d();break}if(^r$.test(r))break;n+=r,o=3;break;case 1if(r===s){n+=r,o=2;break}n+=r,o=1;break;case 2var e=n.substr(n.length-1);if(r===s&&e===s){n+=r,o=1;break}if(r===t){n+=r,o=0;break}if(n===r){d();break}if(r===r)break;throw new Error(CSVDataError Illegal state [Row+a.state.rowNum+]);case 3if(r===t){n+=r,o=0;break}if(n===r){d();break}if(r===r)break;if(r===s)throw new Error(CSVDataError Illegal quote [Row+a.state.rowNum+]);throw new Error(CSVDataError Illegal state [Row+a.state.rowNum+]);defaultthrow new Error(CSVDataError Unknown state [Row+a.state.rowNum+])}}),!==n&&d(),e}function d(){if(o=0,a.start&&a.state.rowNuma.start)return n=,void a.state.rowNum++;if(void 0===a.onParseEntry)e.push(n);else{var r=a.onParseEntry(n,a.state);!1!==r&&e.push(r)}n=,a.end&&a.state.rowNum=a.end&&(i=!0),a.state.rowNum++}},parseEntryfunction(r,e){var a=e.separator,t=e.delimiter;e.state.rowNum(e.state.rowNum=1),e.state.colNum(e.state.colNum=1);var s=[],o=0,n=;function i(){if(void 0===e.onParseValue)s.push(n);else{var r=e.onParseValue(n,e.state);!1!==r&&s.push(r)}n=,o=0,e.state.colNum++}if(!e.match){var l=RegExp.escape(a),c=RegExp.escape(t),u=(DSnr[^DSrn]+).source;u=(u=u.replace(Sg,l)).replace(Dg,c),e.match=new RegExp(u,gm)}return r.replace(e.match,function(r){switch(o){case 0if(r===a){n+=,i();break}if(r===t){o=1;break}if(n===rr===r)break;n+=r,o=3;break;case 1if(r===t){o=2;break}n+=r,o=1;break;case 2if(r===t){n+=r,o=1;break}if(r===a){i();break}if(n===rr===r)break;throw new Error(CSVDataError Illegal State [Row+e.state.rowNum+][Col+e.state.colNum+]);case 3if(r===a){i();break}if(n===rr===r)break;if(r===t)throw new Error(CSVDataError Illegal Quote [Row+e.state.rowNum+][Col+e.state.colNum+]);throw new Error(CSVDataError Illegal Data [Row+e.state.rowNum+][Col+e.state.colNum+]);defaultthrow new Error(CSVDataError Unknown State [Row+e.state.rowNum+][Col+e.state.colNum+])}}),i(),s}},helpers{collectPropertyNamesfunction(r){var e=[],a=[],t=[];for(e in r)for(a in r[e])r[e].hasOwnProperty(a)&&t.indexOf(a)0&&function!=typeof r[e][a]&&t.push(a);return t}},toArrayfunction(r,e,a){e=void 0!==ee{};var t={};t.callback=void 0!==a&&function==typeof a&&a,t.separator=separatorin ee.separatorp.csv.defaults.separator,t.delimiter=delimiterin ee.delimiterp.csv.defaults.delimiter;var s=void 0!==e.statee.state{};e={delimitert.delimiter,separatort.separator,onParseEntrye.onParseEntry,onParseValuee.onParseValue,states};var o=p.csv.parsers.parseEntry(r,e);if(!t.callback)return o;t.callback(,o)},toArraysfunction(r,e,a){e=void 0!==ee{};var t={};t.callback=void 0!==a&&function==typeof a&&a,t.separator=separatorin ee.separatorp.csv.defaults.separator,t.delimiter=delimiterin ee.delimiterp.csv.defaults.delimiter;var s;if(void 0!==(e={delimitert.delimiter,separatort.separator,onPreParsee.onPreParse,onParseEntrye.onParseEntry,onParseValuee.onParseValue,onPostParsee.onPostParse,starte.start,ende.end,state{rowNum1,colNum1}}).onPreParse&&e.onPreParse(r,e.state),s=p.csv.parsers.parse(r,e),void 0!==e.onPostParse&&e.onPostParse(s,e.state),!t.callback)return s;t.callback(,s)},toObjectsfunction(r,e,a){e=void 0!==ee{};var t={};t.callback=void 0!==a&&function==typeof a&&a,t.separator=separatorin ee.separatorp.csv.defaults.separator,t.delimiter=delimiterin ee.delimiterp.csv.defaults.delimiter,t.headers=headersin ee.headersp.csv.defaults.headers,e.start=startin ee.start1,t.headers&&e.start++,e.end&&t.headers&&e.end++;var s,o=[];e={delimitert.delimiter,separatort.separator,onPreParsee.onPreParse,onParseEntrye.onParseEntry,onParseValuee.onParseValue,onPostParsee.onPostParse,starte.start,ende.end,state{rowNum1,colNum1},match!1,transforme.transform};var n={delimitert.delimiter,separatort.separator,start1,end1,state{rowNum1,colNum1}};void 0!==e.onPreParse&&e.onPreParse(r,e.state);var i=p.csv.parsers.splitLines(r,n),l=p.csv.toArray(i[0],e);s=p.csv.parsers.splitLines(r,e),e.state.colNum=1,e.state.rowNum=l21;for(var c=0,u=s.length;cu;c++){for(var f=p.csv.toArray(s[c],e),d={},m=0;ml.length;m++)d[l[m]]=f[m];void 0!==e.transformo.push(e.transform.call(void 0,d))o.push(d),e.state.rowNum++}if(void 0!==e.onPostParse&&e.onPostParse(o,e.state),!t.callback)return o;t.callback(,o)},fromArraysfunction(r,e,a){e=void 0!==ee{};var t={};t.callback=void 0!==a&&function==typeof a&&a,t.separator=separatorin ee.separatorp.csv.defaults.separator,t.delimiter=delimiterin ee.delimiterp.csv.defaults.delimiter;var s,o,n,i,l=;for(n=0;nr.length;n++){for(s=r[n],o=[],i=0;is.length;i++){var c=void 0===s[i]null===s[i]s[i].toString();-1c.indexOf(t.delimiter)&&(c=c.replace(new RegExp(t.delimiter,g),t.delimiter+t.delimiter));var u=nrSD;u=(u=u.replace(S,t.separator)).replace(D,t.delimiter),-1c.search(u)&&(c=t.delimiter+c+t.delimiter),o.push(c)}l+=o.join(t.separator)+n}if(!t.callback)return l;t.callback(,l)},fromObjectsfunction(r,e,a){e=void 0!==ee{};var t={};if(t.callback=void 0!==a&&function==typeof a&&a,t.separator=separatorin ee.separatorp.csv.defaults.separator,t.delimiter=delimiterin ee.delimiterp.csv.defaults.delimiter,t.headers=headersin ee.headersp.csv.defaults.headers,t.sortOrder=sortOrderin ee.sortOrderdeclare,t.manualOrder=manualOrderin ee.manualOrder[],t.transform=e.transform,string==typeof t.manualOrder&&(t.manualOrder=p.csv.toArray(t.manualOrder,t)),void 0!==t.transform){var s,o=r;for(r=[],s=0;so.length;s++)r.push(t.transform.call(void 0,o[s]))}var n,i,l=p.csv.helpers.collectPropertyNames(r);if(alpha===t.sortOrder&&l.sort(),0t.manualOrder.length){var c,u=[].concat(t.manualOrder);for(c=0;cl.length;c++)u.indexOf(l[c])0&&u.push(l[c]);l=u}var f,d=[];for(t.headers&&d.push(l),n=0;nr.length;n++){for(i=[],c=0;cl.length;c++)(f=l[c])in r[n]&&function!=typeof r[n][f]i.push(r[n][f])i.push();d.push(i)}return p.csv.fromArrays(d,e,t.callback)}},p.csvEntry2Array=p.csv.toArray,p.csv2Array=p.csv.toArrays,p.csv2Dictionary=p.csv.toObjects,undefined!=typeof module&&module.exports&&(module.exports=p.csv)}.call(this);